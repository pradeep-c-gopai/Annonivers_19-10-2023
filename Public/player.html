<!-- NEW Copyright Epic Games, Inc. All Rights Reserved. -->

<!DOCTYPE HTML>
<html>
   <head>
      <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
      <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <!--<link type="text/css" rel="stylesheet" href="loader.css">-->
      <link href="./loginfile.css" rel="stylesheet" /> <!-- LOGIN -->

      <link type="text/css" rel="stylesheet" href="player.css">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">
      <script type="text/javascript" src="scripts/webRtcPlayer.js"></script>
      <script type="text/javascript" src="scripts/openvidu-browser-2.27.0.js"></script>
      <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
      <!-- Loader stylesheet CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <script type="text/javascript">
         // This horrible hack is to make Fippo's adapter-latest.js work with Firefox when not on https
         // because FF does not let you access navigator.mediaDevices when on http.
         var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;
         if (isFirefox) {
         	window.navigator.mozGetUserMedia = function () { };
         	if (window.navigator.mediaDevices === undefined) {
         		navigator.mediaDevices = {};
         		navigator.mediaDevices.getSupportedConstraints = function () { return {}; };
         		navigator.mediaDevices.getUserMedia = function () { return {}; };
         	}
         }
      </script>
      <script type="text/javascript" src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
      <script type="text/javascript" src="scripts/webRtcPlayer.js"></script>
      <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
      <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
      <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"> -->
      <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script> -->
   </head>
   <body onload="load()">
      <div id="playerUI" class="noselect">
         <div id="player"></div>
         <div id="create_session_loaderDiv">
            <div id="create_session_loader"></div>
         </div>
         <div id="overlay">
            <div id="controls" >
               <button class="tooltip" onclick="fullscreen()" id="fullscreen-btn">
               <object data="images/minimize-1.svg" type="image/svg+xml" id="minimize"></object>
               <object data="images/maximize-5.svg" type="image/svg+xml" id="maximize"></object>
               <span class="tooltiptext">Fullscreen</span>
               </button>
               <!-- <button class="tooltip" id="settingsBtn">
                  <object data="images/Settings.svg" type="image/svg+xml"></object>
                  <span class="tooltiptext">Settings</span>
                  </button>-->
               <button class="tooltip" id="statsBtn">
               <img src="../images/info1.png" alt="bag"/>
               <span class="tooltiptext">Information</span>
               </button>
               <button class="tooltip" id="chartBtn">
               <object data="images/cart-icon.svg" type="image/svg+xml"></object>
               <span class="tooltiptext">Cart</span>
               </button>
               <!-- Start ORDERS List Panel HTML -->
               <button class="tooltip" id="ordersBtn">
               <img src="../images/bag.png" alt="bag"/>
               <span class="tooltiptext">Orders</span>
               </button> 
               <!-- END ORDERS List Panel HTML -->

               <button class="tooltip" id="CreateSession" onclick="create_session()">
               <img src="../images/share.png" alt="share"/>
               <span class="tooltiptext">Create Private Session</span>
               </button>

               <button class="tooltip" id="saveGame" onclick="saveGameClicked()"> 
                  <img src="../images/diskette.png" alt="share"/>
                  <span class="tooltiptext">Save And Exit</span>
               </button>

               <button class="tooltip" id="msgBtn" >
                  <img src="../images/msg.png" alt="msgs"/>
                  <span class="tooltiptext">Message</span>
               </button>

               <!-- <button class="tooltip" id="CreateSession" onclick="create_session()">create Private session
               </button> -->
               <button class="tooltip" id="showQuery" onclick="saveGameClicked()" > 
                  <img src="../images/conversation.png" alt="share"/>
                  <span class="tooltiptext">show query</span>
               </button>
               <!-- Audio button -->
               <button class="tooltip" id="ChatBtn">
               </button>
               
               <button style="display: none;" class="tooltip" id="callMute">
               </button>

               <button style="display: none;" class="tooltip" id="applyFilter">
                  <label><input type="checkbox" id="start-filter-enabled" name="startFilterEnabled" value="false">Start
                     with filter enabled?</label>
               </button>

               <!-- Start Popup  Modal Product Details HTML -->
               <div id="popupModal" class="popupover"></div>
               <!-- ENd Popup  Modal Product Details HTML -->
              
               <!-- Start Toast Message HTML -->
               <div id="snackbar"></div>
               <div id="snackTnx">
                  <div style="font-size: 22px;font-weight: 600;">Transaction Successful</div>
                  <img style="height: 30px; width: 30px; margin-top: 20px" src="../images/check.png" alt="Sucessful"/>
                  <div id="tnxText" ></div>
                  <button id="tnxClose">OK</button>
               </div>

               <!-- End Toast Message HTML -->

            </div>

            <div id="parentChat" style="display: none;">
               <div id="chatbox"></div>
               <div class="chatMessage">
                  <div style="border-bottom-left-radius: 10px;"><img src="../images/messenger.png" alt="bag" /></div>
                  <input type="text" id="messageBox" placeholder="Type your message...">
                  <div style="border-bottom-right-radius: 10px;" onclick="sendMessage()"><img src="../images/send.png" alt="bag" /></div>
               </div>
            </div>

            <div class="popup" id="popup">
               <!-- <h2>Data List</h2>
               <ul id="dataList"></ul>
               <button id="closePopupButton">Close</button> -->
               <h1>Anoniverse</h1>
               <button id="allPriority">All
                  <div style="display: flex; width: 80px;"></div>
               </button>
               <button id="urgentPriority">Urgent
                  <div style="display: flex; width: 80px;"></div>
               </button>
               <button id="highPriority">High
                  <div style="display: flex; width: 80px;"></div>
               </button>
               <button id="mediumPriority">Medium
                  <div style="display: flex; width: 80px;"></div>
               </button>
               <button id="lowpriority">Low
                  <div style="display: flex; width: 80px;"></div>
               </button>

               <ul id="dataList"></ul>
               
               <button id="closePopupButton">Close</button>

           </div>
           <div id="popupQuery" class="popupQuery">
            <h2>Compose Message</h2>
            <select id="priority" placeholder="Select Priority" style="width: 100%; height: 100%; position: relative; background: white; border-radius: 10px; overflow: hidden;color: #7A7A7A;">
              <option value="low">Low 
               <div style="width: 35px; height: 36px; left: 0px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; background: #363636"></div>
                   <div style="width: 15.14px; height: 28.96px; left: -3.91px; top: 9.89px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; background: #656565"></div>
              </option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
              
            </select>
            <!-- <div style="width: 100%; height: 100%; position: relative; background: white; border-radius: 10px; overflow: hidden">
               <div style="left: 33px; top: 37px; position: absolute; color: #7A7A7A; font-size: 26px; font-family: Poppins; font-weight: 400; word-wrap: break-word">Priority</div>
               <div style="width: 35px; height: 36px; left: 850px; top: 28px; position: absolute; transform: rotate(90deg); transform-origin: 0 0">
                   <div style="width: 35px; height: 36px; left: 0px; top: 0px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; background: #363636"></div>
                   <div style="width: 15.14px; height: 28.96px; left: -3.91px; top: 9.89px; position: absolute; transform: rotate(90deg); transform-origin: 0 0; background: #656565"></div>
               </div>
               <div style="width: 59px; height: 0px; left: 794px; top: 76px; position: absolute; transform: rotate(-90deg); transform-origin: 0 0; border: 2px #656565 solid"></div>
           </div> -->
            <input id="message" placeholder="Enter your Message here" style="background: white; border-radius: 10px; justify-content: flex-start; align-items: center; width: 480px; height: 40px; text-align: start;"></input>
            <button id="sendBtn">Send</button>
            <button id="closeBtn" class="close-button">Close</button>
         </div>

            <!-- <div id="unrealengine">
               <p></p>
               <svg viewBox="0 0 1204.105 74.011" xmlns="http://www.w3.org/2000/svg">
               	<g id="svgGroup" stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="#ffffff" stroke-width="0.25mm" fill="#ffffff" style="stroke:#ffffff;stroke-width:0.25mm;fill:#ffffff">
               		<path d="M 894.605 74.006 L 921.305 74.006 C 942.427 74.006 953.413 73.292 956.313 60.527 A 37.848 37.848 0 0 0 957.105 52.206 L 957.105 31.606 L 907.305 31.606 L 907.305 46.606 L 934.905 46.606 L 934.905 48.706 C 934.905 53.442 932.251 55.385 928.738 56.147 A 26.156 26.156 0 0 1 923.305 56.606 L 899.605 56.606 A 39.408 39.408 0 0 1 894.638 56.344 C 888.593 55.565 886.231 52.853 885.654 45.747 A 52.88 52.88 0 0 1 885.505 41.506 L 885.505 32.506 A 48.028 48.028 0 0 1 885.738 27.377 C 886.556 19.865 889.695 17.689 897.793 17.433 A 57.321 57.321 0 0 1 899.605 17.406 L 923.705 17.406 A 38.323 38.323 0 0 1 927.889 17.588 C 932.328 18.085 934.835 19.818 934.904 25.273 A 18.461 18.461 0 0 1 934.905 25.506 L 956.705 25.506 L 956.705 23.206 A 36.235 36.235 0 0 0 955.47 12.587 C 953.178 5.214 946.987 0.624 931.363 0.064 A 93.813 93.813 0 0 0 928.005 0.006 L 894.605 0.006 C 874.839 0.006 862.985 4.89 862.71 25.469 A 55.259 55.259 0 0 0 862.705 26.206 L 862.705 47.806 A 39.6 39.6 0 0 0 863.741 57.358 C 866.906 70.059 877.192 73.722 892.685 73.99 A 111.289 111.289 0 0 0 894.605 74.006 Z M 323.405 73.206 L 403.905 73.206 L 403.905 55.806 L 345.605 55.806 L 345.605 44.206 L 399.605 44.206 L 399.605 29.206 L 345.605 29.206 L 345.605 17.606 L 402.605 17.606 L 402.605 0.806 L 323.405 0.806 L 323.405 73.206 Z M 656.905 73.206 L 737.405 73.206 L 737.405 55.806 L 679.105 55.806 L 679.105 44.206 L 733.105 44.206 L 733.105 29.206 L 679.105 29.206 L 679.105 17.606 L 736.105 17.606 L 736.105 0.806 L 656.905 0.806 L 656.905 73.206 Z M 1123.605 73.206 L 1204.105 73.206 L 1204.105 55.806 L 1145.805 55.806 L 1145.805 44.206 L 1199.805 44.206 L 1199.805 29.206 L 1145.805 29.206 L 1145.805 17.606 L 1202.805 17.606 L 1202.805 0.806 L 1123.605 0.806 L 1123.605 73.206 Z M 106.205 73.206 L 128.405 73.206 L 128.405 20.606 L 128.605 20.606 L 170.305 73.206 L 204.705 73.206 L 204.705 0.806 L 182.505 0.806 L 182.505 53.406 L 182.305 53.406 L 140.605 0.806 L 106.205 0.806 L 106.205 73.206 Z M 750.805 73.206 L 773.005 73.206 L 773.005 20.606 L 773.205 20.606 L 814.905 73.206 L 849.305 73.206 L 849.305 0.806 L 827.105 0.806 L 827.105 53.406 L 826.905 53.406 L 785.205 0.806 L 750.805 0.806 L 750.805 73.206 Z M 1010.105 73.206 L 1032.305 73.206 L 1032.305 20.606 L 1032.505 20.606 L 1074.205 73.206 L 1108.605 73.206 L 1108.605 0.806 L 1086.405 0.806 L 1086.405 53.406 L 1086.205 53.406 L 1044.505 0.806 L 1010.105 0.806 L 1010.105 73.206 Z M 29.705 74.006 L 61.505 74.006 A 51.732 51.732 0 0 0 72.484 72.955 C 82.691 70.728 88.531 64.939 90.473 55.381 A 40.134 40.134 0 0 0 91.205 47.406 L 91.205 0.806 L 69.005 0.806 L 69.005 42.606 C 69.005 51.405 65.987 55.082 57.762 55.385 A 31.364 31.364 0 0 1 56.605 55.406 L 34.605 55.406 A 22.943 22.943 0 0 1 30.082 55.013 C 24.736 53.93 22.488 50.538 22.231 43.95 A 34.441 34.441 0 0 1 22.205 42.606 L 22.205 0.806 L 0.005 0.806 L 0.005 47.406 C 0.005 64.841 8.73 73.457 27.816 73.981 A 68.853 68.853 0 0 0 29.705 74.006 Z M 219.705 73.206 L 241.905 73.206 L 241.905 54.406 L 276.805 54.406 A 18.122 18.122 0 0 1 280.084 54.663 C 284.425 55.469 285.905 58.272 285.905 64.506 L 285.905 73.206 L 308.105 73.206 L 308.105 60.906 C 308.105 49.006 302.605 46.106 296.005 44.906 L 296.005 44.706 A 22.978 22.978 0 0 0 300.937 43.003 C 305.503 40.745 307.44 37.183 308.108 32.151 A 40.124 40.124 0 0 0 308.405 26.906 L 308.405 22.306 A 33.46 33.46 0 0 0 307.248 12.853 C 305.018 5.341 299.196 0.806 286.705 0.806 L 219.705 0.806 L 219.705 73.206 Z M 410.205 73.206 L 435.005 73.206 L 441.505 60.406 L 486.505 60.406 L 493.405 73.206 L 518.105 73.206 L 478.305 0.806 L 449.405 0.806 L 410.205 73.206 Z M 526.005 73.206 L 598.105 73.206 L 598.105 54.606 L 548.205 54.606 L 548.205 0.806 L 526.005 0.806 L 526.005 73.206 Z M 971.705 73.206 L 993.905 73.206 L 993.905 0.806 L 971.705 0.806 L 971.705 73.206 Z M 241.905 18.806 L 276.605 18.806 A 34.237 34.237 0 0 1 280.146 18.959 C 283.795 19.344 285.876 20.558 286.556 23.711 A 12.861 12.861 0 0 1 286.805 26.406 L 286.805 28.806 A 12.128 12.128 0 0 1 286.485 31.774 C 285.685 34.926 283.316 36.406 278.605 36.406 L 241.905 36.406 L 241.905 18.806 Z M 463.805 17.606 L 478.205 44.806 L 449.805 44.806 L 463.805 17.606 Z"/>
               	</g>
               </svg>
               </div> -->
            <div id="connection" class="tooltip">
               <svg version="1.1" id="connectionStrength" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                  viewBox="0 0 494.45 494.45" style="enable-background:new 0 0 494.45 494.45;" xml:space="preserve">
                  <circle id="dot" cx="247.125" cy="398.925" r="35.3"/>
                  <path id="middle" d="M395.225,277.325c-6.8,0-13.5-2.6-18.7-7.8c-71.4-71.3-187.4-71.3-258.8,0c-10.3,10.3-27.1,10.3-37.4,0
                     s-10.3-27.1,0-37.4c92-92,241.6-92,333.6,0c10.3,10.3,10.3,27.1,0,37.4C408.725,274.725,401.925,277.325,395.225,277.325z"/>
                  <path id="outer" d="M467.925,204.625c-6.8,0-13.5-2.6-18.7-7.8c-111.5-111.4-292.7-111.4-404.1,0c-10.3,10.3-27.1,10.3-37.4,0
                     s-10.3-27.1,0-37.4c64-64,149-99.2,239.5-99.2s175.5,35.2,239.5,99.2c10.3,10.3,10.3,27.1,0,37.4
                     C481.425,202.025,474.625,204.625,467.925,204.625z"/>
                  <path id="inner" d="M323.625,348.825c-6.8,0-13.5-2.6-18.7-7.8c-15.4-15.4-36-23.9-57.8-23.9s-42.4,8.5-57.8,23.9
                     c-10.3,10.3-27.1,10.3-37.4,0c-10.3-10.3-10.3-27.1,0-37.4c25.4-25.4,59.2-39.4,95.2-39.4s69.8,14,95.2,39.5
                     c10.3,10.3,10.3,27.1,0,37.4C337.225,346.225,330.425,348.825,323.625,348.825z"/>
               </svg>
               <span class="tooltiptext" id="qualityText">Not connected</span>
            </div>

            <div class="panel-wrap" id="stats"></div>
            
            <div class="panel-wrap" id="settings-panel">
               <div class="panel">
                  <div id="heading">Settings</div>
                  <div id="close" onclick="settingsClicked()"></div>
                  <div id="content">
                     <div id="fillWindow" class="setting">
                        <div class="settings-text">Enlarge display to fill window</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="enlarge-display-to-fill-window-tgl" class="tgl tgl-flat" checked>
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="qualityControlOwnership" class="setting">
                        <div class="settings-text">Is quality controller?</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="quality-control-ownership-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="matchViewportResolution" class="setting">
                        <div class="settings-text">Match viewport resolution</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="match-viewport-res-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="offerToReceive" class="setting">
                        <div class="settings-text">Offer To Receive</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="offer-receive-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="preferSFU" class="setting">
                        <div class="settings-text">Prefer SFU</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="prefer-sfu-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="useMic" class="setting">
                        <div class="settings-text">Use microphone</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="use-mic-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="forceMonoAudio" class="setting">
                        <div class="settings-text">Force mono audio</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="force-mono-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="forceTURN" class="setting">
                        <div class="settings-text">Force TURN</div>
                        <label class="tgl-switch">
                           <input type="checkbox" id="force-turn-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                     </div>
                     <div id="toggleControl" class="setting">
                        <div class="settings-text" id="control-scheme-text">Control Scheme</div>
                        <label class="btn-overlay">
                        <label class="tgl-switch">
                           <input type="checkbox" id="control-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                        </label>
                     </div>
                     <div id="toggleCursor" class="setting">
                        <div class="settings-text" id="cursor-text">Hide Browser Cursor</div>
                        <label class="btn-overlay">
                        <label class="tgl-switch">
                           <input type="checkbox" id="cursor-tgl" class="tgl tgl-flat">
                           <div class="tgl-slider"></div>
                        </label>
                        </label>
                     </div>
                     <div id="showFPS" class="setting">
                        <div class="settings-text">Show FPS</div>
                        <label class="btn-overlay">
                        <input type="button" id="show-fps-button" class="overlay-button btn-flat" value="Toggle">
                        </label>
                     </div>
                     <div id="keyframeRequest" class="setting">
                        <div class="settings-text">Request KeyFrame</div>
                        <label class="btn-overlay">
                        <input type="button" id="request-keyframe-button" class="overlay-button btn-flat" value="Request">
                        </label>
                     </div>
                     <section id="encoderSettings">
                        <div id="encoderSettingsHeader" class="settings-text">
                           <div>Encoder Settings</div>
                        </div>
                        <div id="encoderParamsContainer" class="collapse">
                           <div class="form-group">
                              <label for="encoder-min-qp-text">Min QP</label>
                              <input type="number" class="form-control" id="encoder-min-qp-text" value="0" min="0"
                                 max="51" />
                              <label for="encoder-max-qp-text">Max QP</label>
                              <input type="number" class="form-control" id="encoder-max-qp-text" value="51" min="0"
                                 max="51" />
                              <br>
                              <input id="encoder-params-submit" class="overlay-button btn-flat" type="button"
                                 value="Apply">
                           </div>
                        </div>
                     </section>
                     <section id="webRTCSettings">
                        <div id="webRTCSettingsHeader" class="settings-text">
                           <div>WebRTC Settings</div>
                        </div>
                        <div id="webrtcParamsContainer" class="collapse">
                           <div class="form-group">
                              <label for="webrtc-fps-text">FPS</label>
                              <input type="number" class="form-control" id="webrtc-fps-text" value="60" min="1"
                                 max="999" />
                              <label for="webrtc-min-bitrate-text">Min bitrate (kbps)</label>
                              <input type="number" class="form-control" id="webrtc-min-bitrate-text" value="0" min="0"
                                 max="100000" />
                              <label for="webrtc-max-bitrate-text">Max bitrate (kbps)</label>
                              <input type="number" class="form-control" id="webrtc-max-bitrate-text" value="0" min="0"
                                 max="100000" />
                              <br>
                              <input id="webrtc-params-submit" class="overlay-button btn-flat" type="button"
                                 value="Apply">
                           </div>
                        </div>
                     </section>
                     <section id="streamSettings">
                        <div id="streamSettingsHeader" class="settings-text">
                           <div>Stream Settings</div>
                        </div>
                        <div id="streamSettingsContainer" class="collapse">
                           <div class="form-group">
                              <div class="settings-text">Player stream</div>
                              <select class="form-control" id="stream-select"></select>
                              <div class="settings-text">Player track</div>
                              <select class="form-control" id="track-select"></select>
                           </div>
                        </div>
                     </section>
                     <br>
                     <section id="connectionSettings">
                        <div id="connectionHeader" class="settings-text">
                           <div>Stream Settings</div>
                        </div>
                        <div id="connectionContainer" class="collapse">
                           <div class="setting">
                              <div class="settings-text"></div>
                              <label class="btn-overlay">
                              <input type="button" id="restart-stream-button" class="overlay-button btn-flat" value="Restart stream">
                              </label>
                           </div>
                        </div>
                     </section>
                  </div>
               </div>
            </div>

            <div class="panel-wrap" id="stats-panel" style="width: 30% !important; opacity: 0.9;" >
               <!-- <div id="close" onclick="statsClicked()"></div> -->
               <div class="panel">
                  <!-- <div style="margin-bottom: 20px; font-size: 26px; font-weight: 700;" class="parentMovemnts">
                     <div class="">Movement Controles</div>
                  </div> -->
                  <div id="content">
                     <div class="parentMovemnts">
                        <div>Movement Controls</div>
                        <div id="close" onclick="statsClicked()"></div>
                     </div>

                     
                     <section class="" id="statsPanel">
                        <div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/Rectangle 18.png" alt="up arrow"/>
                              </div>
                              <div>Forward</div>
                           </div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/Arrow_Down.png" alt="up arrow"/>
                              </div>
                              <div>Backward</div>
                           </div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/Arrow 3.png" alt="up arrow"/>
                              </div>
                              <div> Left</div>
                           </div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/Arrow 4.png" alt="up arrow"/>
                              </div>
                              <div>Right</div>
                           </div>
                        </div>
                        <div style="margin-top:30px">
                           <div class="mouseControl">
                              <div>
                                <img class="name" src="images/alt.png" alt="up arrow" />  
                                <span id="iconSpace"> + </span>
                                 <img class="name" src="images/letter-i.png" alt="up arrow" />
                              </div>
                              <div>Zoom in</div>
                           </div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/alt.png" alt="up arrow" />  
                                 <span id="iconSpace"> + </span>
                                 <img class="name" src="images/letter-o.png" alt="up arrow" />
                              </div>
                              <div>Zoom out</div>
                           </div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/alt.png" alt="up arrow" />  
                                 <span id="iconSpace"> + </span>
                                 <img class="name" src="images/letter-c.png" alt="up arrow" />
                              </div>
                              <div>First Person View</div>
                           </div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/alt.png" alt="up arrow" />  
                                 <span id="iconSpace"> + </span>
                                 <img class="name" src="images/letter-y.png" alt="up arrow" />
                              </div>
                              <div>Rotate product</div>
                           </div>
                           <div class="mouseControl">
                              <div>
                                 <img class="name" src="images/alt.png" alt="up arrow" />  
                                 <span id="iconSpace"> + </span>
                                 <img class="name" src="images/letter-x.png" alt="up arrow" />
                              </div>
                              <div>Exit</div>
                           </div>
                        </div>
                        <div class="mouseHeader">
                           <div></div>
                           <div>Mouse Controls</div>
                        </div>
                        <div class="mouseControl">
                           <div>
                              <img style="height: 50px !important; width: 50px !important;" src="images/left-click.png" alt="up arrow" />
                           </div>
                           <div>Interact with  items/object</div>
                        </div>
                        <div class="mouseControl">
                           <div style="margin-left: 4px;">
                              <img style="height: 50px !important; width: 50px !important;" src="images/right-click.png" alt="up arrow" />
                           </div>
                           <div>Rotate camera using right-click near products</div>
                        </div>
                     </section>
                  </div>
               </div>
            </div>

            <div class="panel-wrap" id="chat-panel" style="display: none;" >
               <!-- <div class="vedioClass" style="display: flex;flex-wrap: wrap;justify-content: space-between;" id="video-container"></div> -->
               <div class="vedioClass" style="display: none" id="video-container"></div>
             </div>

            <!-- Start Chart List Panel HTML -->
            <div  class="panel-wrap" id="chart-panel" style=" width: 93% !important; background: rgba(255, 255, 255, 0.95);">
            <!--TODO -->
               <div class="panel">
         
                  <div id="content">
                     
                     <div class="chartContainer" id="chartContainer">
                        <div class="shoppingCardHeader">
                           <div class="title">Shopping Cart</div>
                           <div id="close" onclick="chartClicked()"></div>
                        </div>
                        <hr/>
                        <div id="productTable"></div>
                     </div>

                     <!--START PROCESS 5 LOGIN -->
                     <div id="registerContain"  style="display: none">
                        <div class="leftArrowDiv">
                           <div class="titleLeftArrow">
                              <div id="registerBack"><img src="../images/ArrowLeft.png" alt="left-arrow" ></div>
                              <div>Register</div>
                           </div>
                           <div id="titleClose1" class="titleClose"><img src="../images/crossIcon.png" alt="left-arrow" ></div>
                        </div>
                        <div id="registerContainer" style="display: flex">
                           <div class="leftContainer">
                              <div style="color: hsl(218, 81%, 95%); font-size: 3rem; margin-bottom: 25px">
                                 Why walk in,
                              </div>
                              <div style="color: hsl(218, 81%, 75%); font-size: 3rem">When you can buy virtually</div>
                              <p class="mb-4 opacity-70" style="color: hsl(218, 81%, 85%)">
                                 V-Shop, is your one-stop fashion destination for anything and everything you need to look good...
                              <ul>
                                 <li style="color: hsl(218, 81%, 85%)">Ability to view models in 3D spaces with AR support</li>
                                 <li style="color: hsl(218, 81%, 85%)">multiple avatar choices.</li>
                                 <li style="color: hsl(218, 81%, 85%)">Virtual tryon feature, paid advertisement support with many more such features...</li>
                              </ul>
                              </p>
                           </div>
                           <div>
                              <div id="radius-shape-1" class="position-absolute rounded-circle shadow-5-strong"></div>
                              <div id="radius-shape-2" class="position-absolute shadow-5-strong"></div>
                              <div class="signup" id="signup">
                                 <form class="sign-up form">
                                    <div class="welcomeTitle">Welcome</div>
                                    <div class="welcomesubtitle">Let's create your account!</div>
                                    <div class="input-container ic1">
                                       <input id="username" class="input" name="username" type="text" placeholder=" User Name" />
                                    </div>
                                    <div class="input-container ic2">
                                       <input id="email" class="input" type="email" placeholder="Email" name="email" />
                                    </div>
                                    <div class="input-container ic2">
                                          <input class="input" type="tel" name="phoneReg" id="phoneReg" placeholder="Mobile Number" maxlength="10" minlength="10">
                                    </div>
                                    <div class="input-container ic2">
                                       <input class="input" type="password" name="password" id="password" placeholder="Password">
                                    </div>
                                    <div class="input-container ic2">
                                       <input class="input" type="password" name="con_password" id="con_password" placeholder=" Confirm Password">
                                    </div>
                                    <div id="showpassword_register_div">
                                       <input type="checkbox" id="showPassword_register">show password
                                    </div>
                                    <button type="submit" id="Submit"  class="submit">Submit</button>
                                    <div class="text3" style="margin: 10px 30px; color: white; cursor: pointer;  font-size: 18px;">
                                       <a onclick="Login_if_registered()" id="wantRegister">Already Registered? Login</a>
                                    </div>
                                 </form>
                              </div>
                              </div>
                        </div>
                     </div>
 
                     <div id="loginContain" style="display: none">
                        <div class="leftArrowDiv">
                           <div class="titleLeftArrow">
                              <div id="loginBack"><img src="../images/ArrowLeft.png" alt="left-arrow" ></div>
                              <div>Login</div>
                           </div>
                           <div id="titleClose2" class="titleClose"><img src="../images/crossIcon.png" alt="left-arrow" ></div>
                        </div>
                        <div class="container" id="loginContainer">
                           <div class="loginContain">
                              <!-- <div class="Title1">Sign in</div>
                              <div class="Title2">Welcome Back! Please enter your details</div> -->
                              <div id="loginFormDiv">
                                    <div class="Title1">Sign in</div>
                                    <div class="Title2">Welcome Back! Please enter your details</div>
                                    <form>
                                       <input type="email" name="loginemail" id="loginemail"  placeholder="Email" style="margin-bottom: 20px"/>
                                       <input  type="password" name="loginpassword" id="loginpassword" placeholder="Password" style="margin-bottom: 5px"/>
                                       <div id="showpassword">
                                          <div id="showpassword_checkBox">
                                             <input type="checkbox" id="showPassword_check">show password
                                          </div>
                                          <div id="forgetpassword" style="margin-bottom: 20px; cursor: pointer;"onclick="forget_password()">Forget password?</div>
                                       </div> 
                                       <button type="submit" onclick="LoginUser(event)"  class="loginBtn">Login</button>
                                    </form>
                                    <div class="iconDivLogin">
                                       <span><img src="images/google.png"/></span> <span>Sign in with Google</span>
                                    </div>
                                    <div class="iconDivLogin">
                                       <span><img src="images/Fox.png"/></span> <span>Connect with Wallet</span>
                                    </div>
 
                                    <div class="text2" style="text-align:center; margin-bottom: 40px;" onclick="newRegister()">Need an account? <span id="wantLogin" style="cursor: pointer;">Create an account</span></div>
                              </div>
                              <div style="display: none" id="forgetPasswordDiv">
                                 <div class="TitleReset">Reset Password</div>
                                 <form>
                                       <input type="email"  id="forgetemail"  placeholder="Email" style="margin-bottom: 20px"/>
                                       <button type="submit" onclick="ChangePassword(event)" class="loginBtn">Send Email</button>
                                    </form>
                              </div>
                              <div style="display: none" id="resetPasswordDiv">
                                 <div class="TitleReset">Reset Password</div>
                                 <form>
                                       <input type="password"  id="newpassword"  placeholder="New Password" style="margin-bottom: 20px"/>
                                       <input type="password"  id="confirmnewpassword"  placeholder="Confirm Password" style="margin-bottom: 20px"/>
                                       <input type="text"  id="url"  placeholder="Enter URL" style="margin-bottom: 20px"/>
                                       <button type="submit" onclick="ResetPassword(event)" class="loginBtn">Reset Password</button>
                                    </form>
                              </div>
                           </div>
                        </div>
                     </div>
                     <!--END PROCESS 5 LOGIN -->

                     <div class="shippingContainer" id="shippingContainer">
                        <div class="leftArrowDiv">
                           <div class="titleLeftArrow">
                           <div id="back1"><img src="../images/ArrowLeft.png" alt="left-arrow" ></div>
                            <div>Checkout</div>
                           </div>
                           <div id="titleClose3" class="titleClose"><img src="../images/crossIcon.png" alt="left-arrow" ></div>
                            </div>
                        <div style="display: flex">
                           <div class="addressPart">
                              <hr />
                              <div class="deliveryAddress">
                                 <div>1. Delivery Details</div>
                                 <div>
                                    <form id="parentAddressRadio"></form>
                                 </div>
                                 <div class="checkoutAdddress" id="addAddress">Add Address</div>
                              </div>
                              <hr />
                              <div>
                                 <div style="font-size: 125%; font-weight: 700">2. Select Payment Method</div>
                                 <div class="selectPaymentMethod" id="PaymentMethodWallet" onclick="PaymentMethodWallet();">
                                    <div class="iconDiv">
                                       <img src="../images/bitcoin1.png" alt="bitcoin"/>
                                       <span>Cryptocurrency</span>
                                    </div>
                                    <div class="arrowDiv">
                                       <img src="../images/right-arrow.png" alt="bitcoin"/>
                                    </div>
                                 </div>
                                 <!-- <div class="selectPaymentMethod" id="PaymentMethodCredit" onclick="PaymentMethodCredit();">
                                    <div class="iconDiv">
                                       <img src="../images/add_card.svg" alt="bitcoin"/>
                                       <span>WalletConnect</span>
                                    </div>
                                    <div class="arrowDiv">
                                       <img src="../images/right-arrow.png" alt="bitcoin"/>
                                    </div>
                                 </div> -->
                              </div>
                           </div>
                           <div class="summarypart">
                              <div>
                                 <div class="orderSummary">Order Summary:</div>
                                 <div class="Summary">
                                    <div style="margin: 20px;">
                                       <div class="summary-header">
                                          <label>Title</label>
                                          <label>Qty</label>
                                          <label>Price</label>
                                       </div>
                                       <div class="sumData" id="summaryTable"></div>
                                    </div>
                                    <div>
                                       <div id="shippingAddress"></div>
                                       <div id="totalPrice"></div>
                                       <div class="formButton">
                                          <div id="proceedToPayment">Proceed to Payment</div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div id="popupAddress" class="popupAddress" style="display: none">
                        <div class="popupAddressContainer">
                           <div class="popupAddressDetails" id="closePopupAddress">
                                 <div class="closeAddress"><img style="height:23px;width:23px; cursor: pointer;"src="../images/left-arrow.png"/></div>
                                 <div>Add Address</div>
                           </div>
                           <div class="popupAddressContain">
                              <div>
                                 <div class="formDiv" id="formDiv">
                                    <label>First Name</label><br>
                                    <input type="text" id="firstName" name="firstName" placeholder="Enter First Name"/>
                                 </div>
                                 <div class="formDiv" id="formDiv">
                                    <label>Last Name</label><br>
                                    <input type="text" id="lastName" name="lastName" placeholder="Enter Last Name"/>
                                 </div>
                                 <div class="formDiv" id="formDiv">
                                    <label>Address</label><br>
                                    <input type="text" id="address" name="address" placeholder="Enter Address"/>
                                 </div>
                                 <div class="formDiv" id="formDiv">
                                    <label>Flat, House, Building No. Apartment</label><br>
                                    <input type="text" id="apartment" name="apartment" placeholder="Apartment, suite, etc."/>
                                 </div>
                                 <div class="formDiv" id="formDiv">
                                    <label>Town/City</label><br>
                                    <input type="text" id="city" name="city" placeholder="Enter City"/>
                                 </div>
                                 <div class="formDiv" id="formDiv">
                                    <label>Country</label><br>
                                    <input type="text" id="country" name="country" placeholder="Country"/>
                                 </div>
                                 <div class="formDiv" id="formDiv">
                                    <label>Phone</label><br>
                                    <input type="tel" id="phone" name="phone" placeholder="Phone Number"/>
                                 </div>
                                 <div class="formDiv" id="formDiv">
                                    <label>PIN Code</label><br>
                                    <input type="text" id="postalCode" name="postalCode" placeholder="Postal Code"/>
                                 </div>
                              </div>
                              <div class="AddAddressButton">
                                 <div id="newAddressSubmit" onclick="AddAddress()">Add Address</div>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div id="paymentSummary" style="display: none">
                        <div class="leftArrowDiv">
                           <div class="titleLeftArrow">
                           <div id="back2"><img src="../images/ArrowLeft.png" alt="left-arrow" ></div>
                           <div>BitPay</div>
                           </div>
                           <div id="titleClose4" class="titleClose"><img src="../images/crossIcon.png" alt="left-arrow" ></div>
                        </div>
                        <div id="iframeButton" class="formButton1">
                           <div id="loadingBitPay">
                              Loading...
                        </div>
                           <iframe style="display: none;"  id="bitPay" data-src="payment.html" width="100%" height="500px"></iframe>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <!-- End Chart List Panel HTML -->

            <!-- Start ORDERS List Panel HTML -->
            <div  class="panel-wrap" id="orders-panel" style="width: 40% !important; opacity: 0.9; height: 100vh; ">
               <div class="panel">
                  <div id="content">
                     <div id="ordersListLoading" style="display: none">Loading......</div>
                     
                     <div id="ordersListContainer" style="display: none">
                       <div class="orderHeader">
                        <div style="font-size: 190%; font-weight: 700;">
                           Order History
                        </div>
                        <div id="close" onclick="OrderListClosed()"></div>
                       </div>
                        <hr/>
                        <div id="ordersContainerTable"></div>
                     </div>

                     <div id="ordersSummaryContainer" style="display: none">
                       <div class="orderHeader">
                        <div class="writeReviewTitle">
                           <span id="orderDetailsBack"><img style="height:20px;width:20px; cursor: pointer;margin-bottom:5px;"src="../images/left-arrow.png"/></span>
                           <span>Order Details</span>
                        </div>
                        <div id="close" onclick="OrderListClosed()"></div>
                       </div>
                        <hr/>
                        <div id="ordersSummaryContain"></div>
                     </div>


                     <div id="writeReviewsContainer" style="display: none">
                        <div class="orderHeader">
                           <div class="writeReviewTitle">
                              <span id="writeReviewBack"><img style="height:20px;width:20px; cursor: pointer;margin-bottom:5px;"src="../images/left-arrow.png"/></span>
                              <span>Write Review</span>
                           </div>
                           <div id="close" onclick="OrderListClosed()"></div>
                        </div>
                        <hr/>
                        <div id="reviewContainer"></div>
                     </div>
                  </div>
               </div>
            </div>
            <!-- END ORDERS List Panel HTML -->
         </div>
      </div>
      </div>
      </div>

      <script type="text/javascript" src="scripts/app.js" ></script>

      <!-- toggle of register page -->

      <script>

         document.getElementById("loginBack").addEventListener('click', function (e) {
            document.getElementById("loginContain").style.display = "none"
            document.getElementById("chartContainer").style.display = "block";
         })

         document.getElementById("registerBack").addEventListener('click', function (e) {
            document.getElementById("registerContain").style.display = "none"
            document.getElementById("chartContainer").style.display = "block";
         })

         document.getElementById("titleClose1").addEventListener('click', function (e) {
            let charPanel = document.getElementById('chart-panel')
            if (charPanel.classList.contains("panel-wrap-visible")) {
               charPanel.classList.toggle("panel-wrap-visible");
            }
         })

         document.getElementById("titleClose2").addEventListener('click', function (e) {
            let charPanel = document.getElementById('chart-panel')
            if (charPanel.classList.contains("panel-wrap-visible")) {
               charPanel.classList.toggle("panel-wrap-visible");
            }
         })

         document.getElementById("titleClose3").addEventListener('click', function (e) {
            let charPanel = document.getElementById('chart-panel')
            if (charPanel.classList.contains("panel-wrap-visible")) {
               charPanel.classList.toggle("panel-wrap-visible");
            }
         })

         document.getElementById("titleClose4").addEventListener('click', function (e) {
            let charPanel = document.getElementById('chart-panel')
            if (charPanel.classList.contains("panel-wrap-visible")) {
               charPanel.classList.toggle("panel-wrap-visible");
            }
            clearInterval(myInterval)

            document.getElementById("bitPay").style.display = "none"
            document.getElementById("loadingBitPay").style.display = "block"
            document.getElementById("bitPay").src ='';
         })

      </script>
       
      <!-- START LOGIN REGISTER -->
      <script>
            async function Submit(Payload) {
               await fetch(`https://metaverse.sakhaglobal.com:447/register` , {
                  method : 'POST',
                  body : JSON.stringify(Payload),
                  headers: {
                  "Content-Type": "application/json"
               }
            })
            .then((response) =>{ return response.json()})
            .then((data)=>{
                  if(data && data.message === "FAILED"){
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText = 'Error occurred please try registering again'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
                  }else{
                     
                     document.getElementById("loginContain").style.display = "block" // PROCESS 1
                     document.getElementById("registerContain").style.display = "none"; // PROCESS 1
                  }
            })
            }


            document.getElementById("Submit").addEventListener('click', async function(event) {
               event.preventDefault();
               let Payload = {
                  username: document.getElementById('username').value,
                  email:document.getElementById('email').value,
                  phone: document.getElementById('phoneReg').value,
                  password: document.getElementById('password').value,
                  con_password: document.getElementById('con_password').value,
               };

               if( Payload.username === '') {
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText =  'Please Provide Username'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);				
                  } else if( Payload.email === '') {
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText =  'Please Provide Email'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);				
                  } else if( Payload.phone === '') {
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText =  'Please Provide Phone'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);				
                  } else if( Payload.password === '') {
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText =  'Please Provide Password'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);				
                  } else if( Payload.con_password === '') {
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText =  'Please Provide Confirm-Password'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);				
                  } else if( Payload.con_password !== Payload.password) {
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText =  'Please Password and Confirm-Password not same'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);				
                  }else{
                     Submit(Payload)
                  }
            })

            const isGuestLogin =  JSON.parse(sessionStorage.getItem('isGuestLogin'));
            if(isGuestLogin === true || isGuestLogin === undefined || isGuestLogin === null ){
               document.getElementById("ordersBtn").style.display = 'none'
               document.getElementById("saveGame").style.display = 'none'
            }

      </script>
      <!-- END LOGIN REGISTER -->

      <!-- toggle audio button -->

      <script>

         let Btn = document.getElementById("callMute");
         Btn.onclick = () => {
            Muted();
            audioMute();
         }

         function Muted() {

            const isMuted = JSON.parse(sessionStorage.getItem('isMuted'))
            const callStarted = JSON.parse(sessionStorage.getItem('callStarted'));
            if (isMuted) {
               sessionStorage.setItem('isMuted', JSON.stringify(false))
               Btn.innerHTML = ` <img src="../images/microphone.png" alt="bag"/>
                           <span class="tooltiptext">Mute</span>`
            } else {
               sessionStorage.setItem('isMuted', JSON.stringify(true))
               Btn.innerHTML = ` <img src="../images/mute.png" alt="bag"/>
                                                <span class="tooltiptext">Unmuted</span>`
            }
         }

         sessionStorage.setItem('isMuted', JSON.stringify(true))
         Muted()


         //Call toggle

         let callBtn = document.getElementById("ChatBtn");
         const startFilterCheckbox = document.getElementById('start-filter-enabled');

         // callBtn.onclick = () => {
         //    callConnect();
         // }

         callBtn.onclick = () => {
         // Check the value in sessionStorage
         const checkSession = JSON.parse(sessionStorage.getItem('isCall'));
         const UserRole = sessionStorage.getItem("UserRole");

         // userRole = 1 for Employee & userRole = 2 for Executive
         if (UserRole == 1) {
            if (checkSession === false) {
               const confirmationForFilter = confirm("Do you want to add filter in your voice?");
               if (confirmationForFilter) {
                  startFilterCheckbox.checked = true;
               } else {
                  const confirmation = confirm("Your voice is not modulate, are to sure to continue?");

                  if (confirmation) {
                     startFilterCheckbox.checked = false;
                  } else {
                     startFilterCheckbox.checked = true;
                  }
               }
            }
         } else {
            if (checkSession === false) {
               const confirmationForFilter = confirm("Do you want to add filter in your voice?");
               if (confirmationForFilter) {
                  startFilterCheckbox.checked = true;
               } else {
                  startFilterCheckbox.checked = false;
               }
            }
         }

         callConnect();
      }

         function callConnect() {

            const isCall = JSON.parse(sessionStorage.getItem('isCall'));
            const callStarted = JSON.parse(sessionStorage.getItem('callStarted'));

            if (isCall) {
               document.getElementById('callMute').style.display = 'none'
               document.getElementById('parentChat').style.display = 'none'
               document.getElementById('chatbox').innerHTML = ''

               sessionStorage.setItem('isCall', JSON.stringify(false))
               callBtn.innerHTML = ` <img src="../images/call.png" alt="bag"/>
                     <span class="tooltiptext">Call</span>`
               // sessionStorage.setItem('isCallStarted', JSON.stringify(false))
               const isCallStarted = JSON.parse(sessionStorage.getItem('isCallStarted'));

               if (isCallStarted) {
                  leaveSession();
               }

            } else {
               document.getElementById('callMute').style.display = 'block'
               sessionStorage.setItem('isCall', JSON.stringify(true))
               sessionStorage.setItem('isCallStarted', JSON.stringify(true))
                  document.getElementById('parentChat').style.display = 'block'

               callBtn.innerHTML = ` <img src="../images/call-end.png" alt="bag"/>
                        <span class="tooltiptext">End Call</span>`
               joinSession();
            }

         }
         sessionStorage.setItem('isCall', JSON.stringify(true))
         sessionStorage.setItem('isCallStarted', JSON.stringify(false))
         callConnect()

      </script>
       
      <!-- START ORDERS --> 
      <script>
         let ordersBtn = document.getElementById("ordersBtn");
         ordersBtn.addEventListener("click", OrderClicked)

         document.getElementById("writeReviewBack").addEventListener('click', function() {
         	document.getElementById("writeReviewsContainer").style.display = "none"
         	document.getElementById("ordersListContainer").style.display = "block";
         })
         document.getElementById("orderDetailsBack").addEventListener('click', function() {
         	document.getElementById("ordersSummaryContainer").style.display = "none"
         	document.getElementById("ordersListContainer").style.display = "block";
         })
         
         function OrderClicked(){

            document.getElementById("ordersListContainer").style.display = "block";
            document.getElementById("writeReviewsContainer").style.display = "none"
            document.getElementById("ordersSummaryContainer").style.display = "none"

         	let settings = document.getElementById("settings-panel");
         	let stats = document.getElementById("stats-panel");
         	let chart = document.getElementById("chart-panel");
         	let ordersPanel = document.getElementById("orders-panel");
         	 
         	if (settings.classList.contains("panel-wrap-visible")) {
         	 settings.classList.toggle("panel-wrap-visible");
         	}
         	 
         	if (stats.classList.contains("panel-wrap-visible")) {
         	 stats.classList.toggle("panel-wrap-visible");
         	}
         	 
         	if (chart.classList.contains("panel-wrap-visible")) {
         	  chart.classList.toggle("panel-wrap-visible");
         	}
         
         	let Details =  document.getElementById('popupModal')
                   Details.style.visibility = 'hidden';
                   Details.style.opacity = '0';
         
         	ordersPanel.classList.toggle("panel-wrap-visible");

         	if (ordersPanel.classList.contains("panel-wrap-visible")) { //update
               OrdersFetch()
            }
         }
         
         function OrderListClosed() {
         	let ordersPanel = document.getElementById("orders-panel");
         	if (ordersPanel.classList.contains("panel-wrap-visible")) {
         		ordersPanel.classList.toggle("panel-wrap-visible");
         	}
         }
          	
         async function OrdersFetch(){
            let cos_id =  JSON.parse(sessionStorage.getItem('customerDetails'));
            document.getElementById("ordersListLoading").style.display = "block";
            document.getElementById("ordersListContainer").style.display = "none";
            // await fetch(`https://metaverse.sakhaglobal.com:447/api/past/orders?customerId=7021017694505`)

           await fetch(`https://metaverse.sakhaglobal.com:447/api/past/orders?customerId=${cos_id && cos_id.id}`)
            .then((response) =>{ return response.json()})
            .then((data) => {
               document.getElementById("ordersListLoading").style.display = "none";
               OrdersListDisplay(data);
            })
         }
         
         function OrdersListDisplay(Data) {
         	document.getElementById("writeReviewsContainer").style.display = "none"
         	document.getElementById("ordersListContainer").style.display = "block";

         	let Parent = document.getElementById('ordersContainerTable');
         	Parent.innerHTML = null;
            
            if(Data && Data.length > 0) {
               Data.forEach(element => {
               let Div = document.createElement("div");
               Div.classList.add('ordersContainer')

               let Head = document.createElement("div");
               Head.classList.add("historyheader")

               let head1 = document.createElement("div");
               head1.classList.add("orderheader")

               let head11 = document.createElement("div")
               head11.innerText = 'ORDER PLACED'

               let head12 = document.createElement("div")
               head12.innerText = new Date(element.orderUpdatedAt).toLocaleDateString()

               head1.append(head11, head12)

               let head2 = document.createElement("div");
               head2.classList.add("totalToheader")

               let head21 = document.createElement("div")
               head21.innerText = 'TOTAL'

               let head22 = document.createElement("div")
               head22.innerText = "" + element.price

               head2.append(head21, head22)

               let head3 = document.createElement("div");
               head3.classList.add("shipToheader")

               let head31 = document.createElement("div")
               head31.innerText = 'SHIP TO'

               let head32 = document.createElement("div")
               head32.innerText = element.shipTo && element.shipTo.first_name + " " + element.shipTo.last_name
               head3.append(head31, head32)
               
               Head.append(head1, head2, head3);

               let Body = document.createElement("div");
               Body.classList.add("ordersContainerBody");
               
               let body1 = document.createElement("div");
               body1.classList.add("historyImage")
               let img = document.createElement("img");
               img.setAttribute("src", element.imageSrc)
               body1.append(img)

               let body2 = document.createElement("div")
               let title = document.createElement("div")
               title.classList.add("producthistoryTitle")
               title.innerText = element.title

               let button = document.createElement("div")

               let buttonDiv1 = document.createElement("div")
               buttonDiv1.classList.add("HistorybuttonDiv")
               let button1 = document.createElement("span")
               button1.classList.add("returnButton")
               button1.innerText = 'Return & replace items'

               let button2 = document.createElement("span")
               button2.classList.add("buyItButton")
               button2.innerText = 'Buy it again'
               // buttonDiv1.append(button1, button2)

               let buttonDiv2 = document.createElement("div")
               buttonDiv2.classList.add("HistorybuttonDiv")
               let button3 = document.createElement("span")
               button3.classList.add("viewButton")
               button3.innerText = 'View your item'

               let button4 = document.createElement("span")
               button4.classList.add("reviewButton")
               button4.innerText = 'Write a review'
               button4.onclick = () => {
                  WriteReview(element)
               }
               // buttonDiv2.append(button3, button4)
               buttonDiv2.append(button4)

               button.append(buttonDiv1 , buttonDiv2)

               body2.append(title , button)

               Body.append(body1, body2)
               
               let Footer = document.createElement("div")
               Footer.classList.add("historyFooter")

               let footer1 = document.createElement("div")
               footer1.classList.add("historyfooterOne")
               footer1.innerText = 'ORDER # ' + element.orderId

               let footer2 = document.createElement("div")
               footer2.classList.add("historyfooterTwo")

               let footer21 = document.createElement("span")
               footer21.innerText = 'View order details'
               footer21.onclick = () => {
                  OrderSummary(element)
               }

               let footer22 = document.createElement("span")
               footer22.innerText = ' | '
               let footer23 = document.createElement("span")
               footer23.innerText = 'Invoice'
               
               if(element && element.shipTo){
                  footer2.append(footer21, footer22, footer23)
               }
               Footer.append(footer1, footer2)

               Div.append(Head, Body , Footer);
               Parent.append(Div)	
            });
               
           }else{
               Parent.innerHTML = 'No past orders found';
            }

         } 

         function OrderSummary(Data) {
            document.getElementById("ordersSummaryContainer").style.display = "block"
         	document.getElementById("ordersListContainer").style.display = "none";

            let Parent = document.getElementById("ordersSummaryContain")
            Parent.innerHTML = null;

            let Top = document.createElement("div")
            Top.classList.add("topDetail")
            let Label = document.createElement("div")
            Label.classList.add("topDetailLabel")

            let Label1 = document.createElement("div")
            Label1.innerText = 'Shipping Address'
            
            let Label2 = document.createElement("div")
            let Label21 = document.createElement("div")
            Label21.innerText = 'Order Summary'
            let Label31 = document.createElement("div")     
            Label2.append(Label21, Label31)

            Label.append(Label1, Label2)
            
            let Value = document.createElement("div")
            Value.classList.add("topDetailValue")
            let Value1 = document.createElement("div")
            
            let {first_name, last_name, address1, address2, city, country, zip, phone} = Data && Data.shipTo

            let first =''
         	if(first_name){
         		first = first_name + ' '
         	}
         
         	let last =''
         	if(last_name){
         		last = last_name + ', '
         	}
         
         	let add1 =''
         	if(address1){
         		add1 = address1 + ', '
         	}
         
         	let add2 =''
         	if(address2){
         		add2 = address2 + ', '
         	}
         
         	let cit =''
         	if(city){
         		cit = city + ', '
         	}
         
         	let cont =''
         	if(country){
         		cont = country + ', '
         	}
         
         	let post =''
         	if(zip){
         		post = zip + ', '
         	}
         
         	let ph =''
         	if(phone){
         		ph = ' Phone Number : ' + phone
         	}

            Value1.innerText = first + last +  add1 + add2 + cit + cont + post + ph;

            let Value2 = document.createElement("div")
            let Value21 = document.createElement("div")
            Value21.innerText = 'Total Price'
            let Value3 = document.createElement("div")
            Value3.innerText = Data.price
            Value2.append(Value21, Value3)
            Value.append(Value1, Value2)
       
            Top.append(Label , Value)

            let Bottom = document.createElement("div")
            Bottom.classList.add("bottomDetail")

            let Bottom1 = document.createElement("div")
            let div1 = document.createElement("div")
      //      div1.innerText = 'Delivered 23-Mar-2023'
            let div2 = document.createElement("div")
            div2.innerText = 'ORDER # ' + Data.orderId

            Bottom1.append(div1, div2)

            let Body = document.createElement("div");
            Body.classList.add("ordersContainerBody");
            
            let body1 = document.createElement("div");
            body1.classList.add("historyImage")
            let img = document.createElement("img");
            img.setAttribute("src", Data.imageSrc)
            body1.append(img)

            let body2 = document.createElement("div")
            let title = document.createElement("div")
            title.classList.add("producthistoryTitle")
            title.innerText = Data.title

            let button = document.createElement("div")

            let buttonDiv1 = document.createElement("div")
            buttonDiv1.classList.add("HistorybuttonDiv")
            let button1 = document.createElement("span")
            button1.classList.add("returnButton")
            button1.innerText = 'Return & replace items'

            let button2 = document.createElement("span")
            button2.classList.add("buyItButton")
            button2.innerText = 'Buy it again'
            buttonDiv1.append(button1, button2)

            let buttonDiv2 = document.createElement("div")
            buttonDiv2.classList.add("HistorybuttonDiv")
            let button3 = document.createElement("span")
            button3.classList.add("viewButton")
            button3.innerText = 'View your item'

            let button4 = document.createElement("span")
            button4.classList.add("reviewButton")
            button4.innerText = 'Write a review'
            button4.onclick = () => {
               document.getElementById("ordersSummaryContainer").style.display = "none"
               document.getElementById("writeReviewsContainer").style.display = "none"
               WriteReview(Data)
            }
            buttonDiv2.append(button3, button4)

            button.append(buttonDiv1 , buttonDiv2)

            body2.append(title , button)

            Body.append(body1, body2)

            Bottom.append(Bottom1, Body)
            
            Parent.append(Top, Bottom)

         }
               

         sessionStorage.setItem('reviewStar', null)
         function WriteReview(Data) {
            console.log('DataData 22', Data);
         	document.getElementById("writeReviewsContainer").style.display = "block"
         	document.getElementById("ordersListContainer").style.display = "none";
            // let orderReviews =  JSON.parse(sessionStorage.getItem('orderReviews'));  // TODO: 
         
         	let Parent = document.getElementById('reviewContainer')
         	Parent.innerHTML = null;
         
         	let Header = document.createElement("div");
         	Header.classList.add("reviewHeader");
         	let imageDiv = document.createElement("div");
         	let image = document.createElement("img")
         	image.setAttribute("src", Data.imageSrc) // TODO: 
         	image.setAttribute("alt", 'image')
         	imageDiv.append(image);
         	let TitleDiv = document.createElement("div")
         	let title = document.createElement("div")
         	title.innerText = Data.title
         	TitleDiv.append(title)
         
         	Header.append(imageDiv, TitleDiv)
         
         	let HR1 = document.createElement("hr")
            HR1.classList.add("HR")
         
         	let HR2 = document.createElement("hr")
            HR2.classList.add("HR")
         
         	let HR3 = document.createElement("hr")
            HR3.classList.add("HR")
         
         	let HR4 = document.createElement("hr")
            HR4.classList.add("HR")
         
         	let RatingDiv = document.createElement("div")
         	RatingDiv.classList.add('writeReviewDiv')
         	let ratingTitle = document.createElement("div")
            ratingTitle.innerText = 'Rating'
            let ratingStar = document.createElement("div")
            ratingStar.setAttribute('id', 'writeRatingStar')
         	
         	let reviewStar =  JSON.parse(sessionStorage.getItem('reviewStar'));
         
         	if(reviewStar){
         		for(let index = 1; index <= reviewStar ; index++) {
         			let star = document.createElement("img")
         			star.setAttribute("src", '../images/fillStar.png')
         			star.onclick = () =>{
         				sessionStorage.setItem('reviewStar', JSON.stringify(index));
         				WriteReview(Data)
         			}
         			ratingStar.appendChild(star)
         		}
         
         		for(let index = reviewStar + 1; index <= 5 ; index++) {
         			let star = document.createElement("img")
         			star.setAttribute("src", '../images/unFilled.png')
         			star.onclick = () =>{
         				sessionStorage.setItem('reviewStar', JSON.stringify(index));
         				WriteReview(Data)
         			}
         			ratingStar.appendChild(star)
         		}
         
         	}else{
         		for(let index = 1; index <= 5 ; index++) {
         			let star = document.createElement("img")
         			star.setAttribute("src", '../images/unFilled.png')
         			star.onclick = () =>{
         				sessionStorage.setItem('reviewStar', JSON.stringify(index));
         				WriteReview(Data)
         			}
         			ratingStar.appendChild(star)
         	   }
         	}
         	
         
         	RatingDiv.append(ratingTitle , ratingStar)
         
         	let HeadlineDiv = document.createElement("div")
         	HeadlineDiv.classList.add('HeadlineDiv')
         	let headlineTitle = document.createElement("div")
         	headlineTitle.innerText = 'Add a Headline'
         	let headlineInput = document.createElement("input")
         	headlineInput.setAttribute('id', 'title')
         
         	headlineInput.setAttribute('placeholder' , 'What is the most important thing to know?')
         	HeadlineDiv.append(headlineTitle, headlineInput )
         
         	let WrittenReviewDiv = document.createElement("div")
         	WrittenReviewDiv.classList.add('WrittenReviewDiv')
         
         	let writtenTitle = document.createElement("div")
         	writtenTitle.innerText = 'Add a Written Review'
         	let writtentextarea = document.createElement("textarea")
         	writtentextarea.setAttribute('id', 'textarea')
         
            WrittenReviewDiv.append(writtenTitle, writtentextarea)
                   
         	let PostReviewDiv = document.createElement("div")
            PostReviewDiv.classList.add('PostReviewDiv')
         	let button = document.createElement("button")
         	button.innerText = 'Post Review'
         	button.onclick = () =>{
         		let userLoginDetails =  JSON.parse(sessionStorage.getItem('customerDetails'));
               let reviewStar =  JSON.parse(sessionStorage.getItem('reviewStar'));
               let Payload = {
                  id: Data.productId,
                  email: userLoginDetails && userLoginDetails.email,
                  name:  userLoginDetails && userLoginDetails.firstName,
                  rating: reviewStar,
                  title: document.getElementById('title').value,
                  body: document.getElementById('textarea').value,
               }
               
               if(reviewStar && Payload.title && Payload.body){
                  HandlePostReview(Data, Payload)
               }else{

                  if(!reviewStar){
                     var snackbar = document.getElementById("snackbar");
         		      snackbar.className = "show";
         		      snackbar.innerText = 'Please add product rating'
         		      setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
                  }else if(!Payload.title){
                     var snackbar = document.getElementById("snackbar");
         		      snackbar.className = "show";
         		      snackbar.innerText = 'Please provide review heading'
         		      setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
                  } else if(!Payload.body){
                     var snackbar = document.getElementById("snackbar");
         		      snackbar.className = "show";
         		      snackbar.innerText = 'Please add some description'
         		      setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
                  }
               
               }
         	}
         	PostReviewDiv.append(button)
         
         	Parent.append(Header , HR1 , RatingDiv ,  HeadlineDiv,  WrittenReviewDiv ,  PostReviewDiv)
         }
         
         async function HandlePostReview(Data, Payload) {

            await fetch(`https://metaverse.sakhaglobal.com:447/api/post/reviews/${Data.productId}/${JSON.stringify(Payload)}` , {
         		method : 'POST',
         	})
         	.then((response) =>{ return response.json()})
         	.then((data) => {
               document.getElementById('title').value = "";
               document.getElementById('textarea').value = "";
               sessionStorage.setItem('reviewStar', null);
               WriteReview(Data);
         
         		var snackbar = document.getElementById("snackbar");
         		snackbar.className = "show";
         		snackbar.innerText = 'Review Added'
         		setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         	}).catch((error) => {
                console.log('DDDDDDDDDD', error);
            })
         }
         
      </script>
      <!-- END ORDERS -->
     
      <!-- Start Chart List Panel JS -->
      <script>
         async function getshipping_add(){
         	
            let Parent = document.getElementById("parentAddressRadio")
            Parent.innerHTML = 'Loading....'

         	let Data = await fetch('https://metaverse.sakhaglobal.com:447/shipping_add',{
         		method:"POST"
         	}) 
         	.then((response) =>{
         		return response.json() })
         	
         	if(Data){  // TODO
         			Parent.innerHTML = null;
                  Parent.style.opacity = 1;
                  document.getElementById('shippingContainer').style.display = 'block';
                  document.getElementById('popupAddress').style.display = 'none';
         			Data.map((data , index)=>{
         		   let { firstname, lastname, address1, address2, city, country, postalcode,  phone,   } = data;
         		   
         		   let childDiv = document.createElement("div")
         			childDiv.classList.add('selectAddressRadio')
         
         			let first =''
         			if(firstname){
         				first = firstname + ' '
         			}
         
         			let last =''
         			if(lastname){
         				last = lastname + ', '
         			}
         
         			let add1 =''
         			if(address1){
         				add1 = address1 + ', '
         			}
         
         			let add2 =''
         			if(address2){
         				add2 = address2 + ', '
         			}
         
         			let cit =''
         			if(city){
         				cit = city + ', '
         			}
         
         			let cont =''
         			if(country){
         				cont = country + ', '
         			}
         
         			let post =''
         			if(postalcode){
         				post = postalcode + ', '
         			}
         
         			let ph =''
         			if(phone){
         				ph = ' Phone Number : ' + phone
         			}
         
         			let ValueData = ''
         			if(data.default){
         				let input = document.createElement("input")
         				input.setAttribute("type", "radio")
         				input.setAttribute("id", index)
         				input.setAttribute("name", 'address')
         				// input.setAttribute("value", JSON.stringify(data))
         				input.setAttribute("checked" , 'checked')
         
         				let label = document.createElement("label")
         				label.setAttribute("for", index)
         				label.innerText = first + last +  add1 + add2 + cit + cont + post + ph;
         
         				childDiv.append(input , label)
         
         				let Payload = {
         					defultAddress : data,
         				};
         				sessionStorage.setItem('userAddress', JSON.stringify(Payload));
         				
         				input.onclick = () => {
         				    sessionStorage.setItem('userAddress', JSON.stringify(Payload));
         					ShippingAddress()
         				}
         
         				ShippingAddress()
         
         			}else{
         				let input = document.createElement("input")
         				input.setAttribute("type", "radio")
         				input.setAttribute("id", index)
         				input.setAttribute("name", 'address')
         
         				let label = document.createElement("label")
         				label.setAttribute("for", index)
         				label.innerText = first + last +  add1 + add2 + cit + cont + post + ph;
         				childDiv.append(input , label)
         
         				input.onclick = () => {
                        let Payload = {
         					    defultAddress : data,
         				   };
         				   sessionStorage.setItem('userAddress', JSON.stringify(Payload));
         				   ShippingAddress()
         				}
         			}
         			Parent.append(childDiv)
         	})
         		
         		}else{ // TODO
         			let Parent = document.getElementById("parentAddressRadio")
                  document.getElementById('parentAddressRadio').style.display = 'block';
                  Parent.style.opacity = 0.5;
                  Parent.style.textAlign = 'center';
                  Parent.innerHTML = 'Please add shipping address';
         	}
         }
         
     </script>

      <script>
         document.getElementById('addAddress').addEventListener('click', function(){
            console.log('Click AddAddress')
         	let ParentModal = document.getElementById('popupAddress');
         	ParentModal.style.display = 'flex'
            ParentModal.style.justifyContent = 'center'
            document.getElementById('shippingContainer').style.display = 'none';
         
         	document.getElementById('firstName').value = '';
         	document.getElementById('lastName').value = '';
         	document.getElementById('address').value = '';
         	document.getElementById('apartment').value = '';
         	document.getElementById('city').value = '';
         	document.getElementById('postalCode').value = '';
         	document.getElementById('phone').value = '';
         	document.getElementById('country').value = '';
         	
         }) 
         
         document.getElementById('back1').addEventListener('click', function() {
         	document.getElementById('chartContainer').style.display = 'block';
         	document.getElementById('shippingContainer').style.display = 'none';
            Chart()
         })
         
         document.getElementById('newAddressSubmit').addEventListener('click', function() { 
         	let UserAddress =  JSON.parse(sessionStorage.getItem('userAddress')) 
                   
         	if(UserAddress.firstName !== ''  || UserAddress.lastName !== '' 
         	    || UserAddress.address !== '' 
         		|| UserAddress.apartment !== '' 
         		|| UserAddress.city !== ''
         		|| UserAddress.postalCode !== ''
         		|| UserAddress.phone !== ''
         		|| UserAddress.country !== '' 
         		|| UserAddress.defultAddress === null
         		) {
         	    
         		if(UserAddress.defultAddress === null && UserAddress.firstName === '' &&
         		    UserAddress.lastName === '' && UserAddress.address === ''  &&  UserAddress.apartment === '' && 
         			UserAddress.city === '' && UserAddress.postalCode === '' && UserAddress.phone === '' && UserAddress.country === '' 
         			) {
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Provide Shipping Address'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);				
         		}else
         		if(UserAddress.firstName === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter First Name'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}else
         
         		if(UserAddress.lastName === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter Last Name'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}else
         
         		if(UserAddress.address === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter Address'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}else
         
         		if(UserAddress.apartment === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter Appartment'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}else
         
         
         		if(UserAddress.city === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter City'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}else
         
         		if(UserAddress.country === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter Country'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}else
         
         		
         		if(UserAddress.phone === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter Phone'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}else
         
         		if(UserAddress.postalCode === ''){
         			var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                           snackbar.innerText =  'Please Enter PostalCode'
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         		}
         		
                   
         	}else{  // TODO
         
         		ShippingAddress()
         	   SummaryTable() 
         	   TotalPrice() 
         	}
         
         	if(UserAddress.firstName !== '' 
         	    && UserAddress.lastName !== '' 
         	    && UserAddress.address !== '' 
         		&& UserAddress.apartment !== '' 
         		&& UserAddress.city !== ''
         		&& UserAddress.postalCode !== ''
         		&& UserAddress.phone !== '' && UserAddress.country !== '' ){
                      
         		
         		ShippingAddress()
         	   SummaryTable() 
         	   TotalPrice()
         
         		// let ParentModal = document.getElementById('popupAddress');
         		// ParentModal.style.visibility = 'hidden';
         		// ParentModal.style.opacity = '0';
         		
         	}
         })
         
         document.getElementById('proceedToPayment').addEventListener('click', function() {
            
         	let paymentMethod = JSON.parse(sessionStorage.getItem('paymentMethod'));
            let userAddress = JSON.parse(sessionStorage.getItem('userAddress'));
            if(userAddress === null){
                 var snackbar = document.getElementById("snackbar");
                 snackbar.className = "show";
                 snackbar.innerText = 'Please Add Shipping Address'
                 setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
            }
         	else if(paymentMethod === null){	
         		  var snackbar = document.getElementById("snackbar");
                 snackbar.className = "show";
                 snackbar.innerText = 'Please Select Payment Method'
                 setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
         	} else {
         		document.getElementById('shippingContainer').style.display = 'none';
         		document.getElementById('paymentSummary').style.display = 'block';
               draft_order();
         	}
         
         })
         
         document.getElementById('back2').addEventListener('click', function() {
         	document.getElementById('shippingContainer').style.display = 'block';
         	document.getElementById('paymentSummary').style.display = 'none';
            clearInterval(myInterval)

            document.getElementById("bitPay").style.display = "none" 
            document.getElementById("loadingBitPay").style.display = "block" 
            document.getElementById("bitPay").src = '';
         })

         document.getElementById('closePopupAddress').onclick = function(event) {
         document.getElementById('shippingContainer').style.display = 'block';
                  document.getElementById('popupAddress').style.display = 'none';
         }
         
      </script>

      <script>
         let chartBtn = document.getElementById("chartBtn");
         chartBtn.addEventListener("click", chartClicked);          

         function chartClicked() {
            document.getElementById("chartContainer").style.display = "block";
            document.getElementById("shippingContainer").style.display = "none";
            document.getElementById("paymentSummary").style.display = "none";
            document.getElementById("loginContain").style.display = "none"; // LOGIN 
            document.getElementById("registerContain").style.display = "none"; // LOGIN 
            document.getElementById('popupModal').innerHTML = null; // TODO
            document.getElementById("popupAddress").style.display = "none"; 

         
            let settings = document.getElementById("settings-panel");
            let stats = document.getElementById("stats-panel");
            let chart = document.getElementById("chart-panel");
            let pastOrder = document.getElementById('orders-panel')
         
            if (pastOrder.classList.contains("panel-wrap-visible")) {
               pastOrder.classList.toggle("panel-wrap-visible");
            }
         
            if (stats.classList.contains("panel-wrap-visible")) {
               stats.classList.toggle("panel-wrap-visible");
            }
         
            let Details =  document.getElementById('popupModal')
            Details.style.visibility = 'hidden';
            Details.style.opacity = '0';
         
            chart.classList.toggle("panel-wrap-visible");
            Chart();
         }
         
         function Chart(){
         	let ProductTable = document.getElementById('productTable');
         	ProductTable.innerHTML = null;
         
         	let userCartList =  JSON.parse(sessionStorage.getItem('userCartList'))
             const totalPrice = userCartList && userCartList.reduce((acc, item) => acc +  item.price * item.quantity, 0);
                   
         	let temp = 0
         	const  totalItem = userCartList && userCartList.map((item) => temp += parseInt(item.quantity))
         
         	if(userCartList && userCartList.length > 0){
         		
         		let leftDiv = document.createElement("div");
         		leftDiv.classList.add('leftDiv')
         
         		let rightDiv = document.createElement("div");
         		rightDiv.classList.add('rightDiv')
         
         		let div1 = document.createElement("div") // subtotal
         		div1.classList.add('subtotal')
         
               let div11 = document.createElement("div")
         		div11.innerText = 'Subtotal : '
         		let div12 = document.createElement("div")
               div12.innerText = '' + totalPrice
         		div1.append(div11, div12)
                      
         		let div2 = document.createElement("div") // total item
         		div2.classList.add('totalitem')
               div2.innerText = temp + ' items'
         
         		let proceedToBuy = document.createElement('div') // proceedtobuy
               proceedToBuy.classList.add('proceedToBuyBtn')
         		
         		let button = document.createElement('div')
         		button.setAttribute('id', 'proceedToBuy')
         		button.innerText = 'Proceed to Buy'
                       
         		button.onclick = () => {
                  sessionStorage.setItem('userAddress', null);
                  sessionStorage.setItem('paymentMethod', JSON.stringify(null)); 
                  ResetMethod() 

                  document.getElementById('loginemail').value = "";
                  document.getElementById('loginpassword').value = "";

                  const isGuestLogin =  JSON.parse(sessionStorage.getItem('isGuestLogin'));
                  if(isGuestLogin){
                     document.getElementById('loginContain').style.display = 'block'; // LOGIN

                     document.getElementById('loginFormDiv').style.display = 'block'; // PROCESS 1
                     document.getElementById('forgetPasswordDiv').style.display = 'none'; // PROCESS 1
                     document.getElementById('resetPasswordDiv').style.display = 'none'; // PROCESS 1 

                     document.getElementById('chartContainer').style.display = 'none';
                     // window.location.href = "/register.html";
                  }else{
                     document.getElementById('chartContainer').style.display = 'none';
         	         document.getElementById('shippingContainer').style.display = 'block';
         			   getshipping_add()
         			   ShippingAddress()
         			   SummaryTable()
                     TotalPrice()
                  }
         		  
         		}
         
               proceedToBuy.append(button)
         
         
         		rightDiv.append(div1, div2 , proceedToBuy)
                       
         		userCartList.map(element => {
         
         			let Div = document.createElement("div");
         			Div.classList.add('product')
         			
         
         			let imgDiv = document.createElement("div");
         			imgDiv.classList.add('chartImgDiv')
         
         			let image = document.createElement("img")
         			image.setAttribute("src", element.image)
         			image.setAttribute("alt", 'image')
                  imgDiv.append(image)
         			
         			let detailsDiv = document.createElement("div");
         
         			let chartTitle = document.createElement("div");
         			chartTitle.classList.add('chartTitle')

                  let Title = document.createElement("div")
                  Title.innerText = element.title

                  let cross = document.createElement('div')
         			cross.classList.add('spanCross')
         			let spanCross = document.createElement('span')
         			spanCross.onclick = () => {
         				userCartList = userCartList.filter( (x) => x.variant_id !== element.variant_id)
         				sessionStorage.setItem('userCartList', JSON.stringify(userCartList));
         				Chart()
         			}
         			spanCross.innerText = 'X'
         			cross.append(spanCross)

                  chartTitle.append(Title, cross)
         
         			let selectDiv = document.createElement("div")
         			selectDiv.classList.add('selectDiv')

                  let selectLeft = document.createElement("div")
                  let selectRight = document.createElement("div")
         
         			let selectDiv1 = document.createElement("div")
         			let label11 = document.createElement("span")  // Label
         			label11.classList.add('sizeCss')
         			label11.innerText = 'Size : '
                  let select11 = document.createElement("span") // Select
         			select11.classList.add('sizeStyle')
         			select11.innerText = element.size
         			selectDiv1.append(label11, select11)
         
         			let selectDiv2 = document.createElement("div")  // Div      
         			let quantityInput = document.createElement('input');
         			quantityInput.classList.add('quantityInput')
         			quantityInput.setAttribute('value', element.quantity)
                  quantityInput.setAttribute('disabled', true)
         			let addBtn = document.createElement('button')
         			addBtn.setAttribute('id' , 'addBtn')
         			addBtn.innerText = '+'
         			addBtn.onclick = () => {
         				const exist = userCartList.find(item => item.variant_id === element.variant_id)
         				if(exist) {
         					userCartList =  userCartList.map(x => 
         						x.variant_id === element.variant_id ? { 
         							...exist , 
         							quantity: exist.quantity + 1
         						} : x )
         				} else {
         					userCartList =  [  ...userCartList,  { ...element, quantity:1 } ]
         				}
         				sessionStorage.setItem('userCartList', JSON.stringify(userCartList));
         				Chart()
         			}
                  let removeBtn = document.createElement('button')
         			removeBtn.setAttribute('id' , 'removeBtn')
         			removeBtn.innerText = '-'
         			removeBtn.onclick = () => {
         				const exist = userCartList.find(item => item.variant_id === element.variant_id)
         				if(exist.quantity ===1){
         					userCartList = userCartList.filter( (x) => x.variant_id !== element.variant_id)
         				} else {
         					userCartList = userCartList.map(x => 
         					x.variant_id === element.variant_id ? { 
         						...exist , 
         						quantity: exist.quantity-1
         					} : x )
         				}
         				sessionStorage.setItem('userCartList', JSON.stringify(userCartList));
         				Chart()
         			}
         			selectDiv2.append(removeBtn , quantityInput , addBtn)
         
         			selectLeft.append(selectDiv1, selectDiv2)
                  selectDiv.append(selectLeft, selectRight)
         	
         
         			let chartPriceDiv = document.createElement("div");
         			chartPriceDiv.classList.add('chartPriceDiv')
         			let span1 = document.createElement("span")
         			span1.innerText = '' + element.price // TODO
         			let span2 = document.createElement("span")
         			span2.innerText = 'MRP ' + (Number(element.price)/0.55).toFixed() // TODO
         			let span3 = document.createElement("span")
         			span3.innerText = '( 45% OFF )'
         
         			chartPriceDiv.append(span1, span2, span3)
         
         			detailsDiv.append(chartTitle, selectDiv, chartPriceDiv)
         
         
         			Div.append(imgDiv , detailsDiv)
         			leftDiv.append(Div)
         		});
                
               let leftContainer = document.createElement('div')
               leftContainer.append(leftDiv)
               leftContainer.style.flex = '2'
               let rightContainer = document.createElement('div')
               rightContainer.append(rightDiv)
               rightContainer.style.flex = '1'

         		ProductTable.append(leftContainer, rightContainer)	
         	}else{
         		ProductTable.innerText = 'No Records Found'
         		// document.getElementById('proceedToBuy').style.display = 'none';
         	}
         
         }
         
         function SummaryTable(){
         let SummaryTable = document.getElementById('summaryTable');
         SummaryTable.innerHTML = null;
         let userCartList =  JSON.parse(sessionStorage.getItem('userCartList'))
               
         if(userCartList && userCartList.length > 0){
         		userCartList.map(element => {
         
         			let Div = document.createElement("div");
         			Div.style.display = "flex";
         			Div.style.marginBottom= '16px'
                  Div.style.paddingBottom = '20px';
         			Div.style.fontSize = '100% !important'
         
         			let Label2 = document.createElement('label');  // Label 2  Name
         			Label2.innerText = element.title
         
         			let Label3 = document.createElement('label');  // Label 3  Price
         			Label3.innerText = element.price
         
         			let Label4 = document.createElement('label'); // Label 4  Quantiy
         			Label4.innerText = element.quantity
         
         
         			Div.append( Label2, Label4 , Label3 )
         			SummaryTable.append(Div)				
         		});
         	}
         }
         SummaryTable()
         
         
         function TotalPrice(){
         let TotalPrice = document.getElementById('totalPrice');
         TotalPrice.innerHTML = null;
            
         let userCartList =  JSON.parse(sessionStorage.getItem('userCartList'))
         
         const OnlinePrice = userCartList && userCartList.reduce((acc, item) => acc +  item.price * item.quantity, 0);
         console.log(OnlinePrice, 'OnlinePrice');
         
         sessionStorage.setItem('totalPrice', JSON.stringify(OnlinePrice));
         
         if(userCartList && userCartList.length > 0){
         
         	let Div1 = document.createElement('div');

         	let Div11 = document.createElement('div');
         	Div11.innerText = 'Total : '
         	Div11.style.marginRight = '10px';
         	let Div12 = document.createElement('div');
         	Div12.innerText = '' + OnlinePrice
         	Div1.append(Div11, Div12)	
         	TotalPrice.append(Div1)
         }
         } 
         TotalPrice()
         
      </script>
      <!-- End Chart List Panel JS -->

      <script>
         async function AddAddress(){
         	let localData =  JSON.parse(sessionStorage.getItem('userAddress')); // TODO
         	let Payload = {
         		defultAddress : localData && localData.defultAddress,  // TODO
         		firstName : document.getElementById('firstName').value,
         		lastName : document.getElementById('lastName').value,
         		address : document.getElementById('address').value,
         		apartment: document.getElementById('apartment').value,
         		city: document.getElementById('city').value,
               country: document.getElementById('country').value,
         		postalCode: document.getElementById('postalCode').value,
         		phone: document.getElementById('phone').value,
         	};
         
         	sessionStorage.setItem('userAddress', JSON.stringify(Payload)); // TODO
         	
         	let data = {
                       firstName: document.getElementById('firstName').value,
                       lastName : document.getElementById('lastName').value,
                       address : document.getElementById('address').value,
                       apartment: document.getElementById('apartment').value,
                       city: document.getElementById('city').value,
                       country: document.getElementById('country').value,
                       postalCode: document.getElementById('postalCode').value,
                       phone: document.getElementById('phone').value,
                   }
         	if(data.firstName !== '' && data.lastName !== '' && data.address !== '' && data.apartment !== '' && data.city !== '' && data.country !== '' &&
         	 data.postalCode !== '' && data.phone !==''){
         		let new_add = await fetch("https://metaverse.sakhaglobal.com:447/new_add",{
         			method:"POST",
         			body: JSON.stringify(Payload),
         			headers:{
         				'Content-Type':'application/json',
         				'Access-Control-Allow-Origin': '*'
         			},
         		})
               if(new_add.status === 500){
                  new_add.json() // Read the response body as text
                  .then((response) => {
                     if(response.country){
                     var snackbar = document.getElementById("snackbar");
                     snackbar.className = "show";
                     snackbar.innerText = 'Not valid country';
                     setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);
                     } 
                  })
                  .catch((error) => {
                     console.error("Error reading response body:", error);
                  });
                  
               }
               else{
                  console.log("hey..");
                  new_add.json()
                  .then((data) => {
                  setTimeout(function() {
                     getshipping_add()
                  }, 1000);
                  
                  setTimeout(function() {
                     ShippingAddress()
                  }, 2000);
               })
               }
         	 }
         }
         	
         
      </script>

      <script>
         function ShippingAddress(){
         let shippingAddress =  document.getElementById('shippingAddress')
         shippingAddress.innerHTML = null;
         let Address = JSON.parse(sessionStorage.getItem('userAddress'));
         
         if(Address && Address.firstName && Address.firstName !== ''){
         
         	let ChildDiv = document.createElement('div');
         	ChildDiv.classList.add('shippingAddressStyle') 
         
         	ChildDiv.innerText = 'Address  : ' + Address.firstName + ' ' + Address.lastName + ', ' + Address.apartment + ', ' + Address.address + ', ' + Address.city + ', ' + Address.postalCode + '. ' + 'Phone Number : ' + Address.phone
         	shippingAddress.appendChild(ChildDiv);
         }
         else if(Address && Address.defultAddress !== ''){ // TODO
         	let {firstname, lastname , address1 , address2 ,city , country , phone , postalcode } = Address.defultAddress // // TODO
                      
         	let first =''
         	if(firstname){
         		first = firstname + ' '
         	}
         
         	let last =''
         	if(lastname){
         		last = lastname + ', '
         	}
         
         	let add1 =''
         	if(address1){
         		add1 = address1 + ', '
         	}
         
         	let add2 =''
         	if(address2){
         		add2 = address2 + ', '
         	}
         
         	let cit =''
         	if(city){
         		cit = city + ', '
         	}
         
         	let cont =''
         	if(country){
         		cont = country + ', '
         	}
         
         	let post =''
         	if(postalcode){
         		post = postalcode + ', '
         	}
         
         	let ph =''
         	if(phone){
         		ph = ' Phone Number : ' + phone
         	}
         
         	let ChildDiv = document.createElement('div');
         	ChildDiv.classList.add('shippingAddressStyle') 
         
         	ChildDiv.innerText = 'Address : ' + first + last +  add1 + add2 + cit + cont + post + ph;
         	shippingAddress.appendChild(ChildDiv);
         
         	
         }
         }
         
      </script>

      <script>
      
         async function draft_order() {
            const add = JSON.parse(sessionStorage.getItem("userAddress"));
            const cart = JSON.parse(sessionStorage.getItem("userCartList"));
            const body = {
               cart: cart,
               add: add
            }

         	let data = await fetch('https://metaverse.sakhaglobal.com:447/draft_order',
         	{
                  method: "POST",
         	 	body: JSON.stringify(body),
                  headers: {
                     'Content-Type': 'application/json',
         	 	},
            }).then((response) => { 
                  return response.json() 
               }).then((data) => {
                  sessionStorage.setItem('draft_id', JSON.stringify(data.id));
                  create_invoice();
               })
         }
         var myInterval = null

         async function create_invoice() {
            const customerDetails = JSON.parse(sessionStorage.getItem("customerDetails"));
            const price = JSON.parse(sessionStorage.getItem("totalPrice"));
            const order_id = JSON.parse(sessionStorage.getItem("draft_id"));
            const body = {
               order_id: order_id,
               price: price,
               email: customerDetails.email
            }

            let data = await fetch('https://metaverse.sakhaglobal.com:447/create-invoice',
               {
                  method: "POST",
                  body: JSON.stringify(body),
                  headers: {
                     'Content-Type': 'application/json',
                  },
               })
               .then((response) => {
                  return response.json()
               })
               .then((data) => {
                  sessionStorage.setItem('bitpayData', JSON.stringify(data.data));
                  document.getElementById("loadingBitPay").style.display = "none"
                  document.getElementById("bitPay").style.display = "block"
                  document.getElementById("bitPay").src = data && data.data && data.data.url;
                  myInterval = setInterval(invoice_status, 5000, data.data.id);
               })

         }
         async function invoice_status(id) {
            let data = await fetch(`https://metaverse.sakhaglobal.com:447/invoice-status?invoiceId=${id}`,
               { method: "GET" })
               .then((response) => {
                  return response.json()
               })

               .then((data) => {
                  if (data.data.status === "paid") {
                     let text = document.getElementById("snackTnx");
                     text.style.visibility="visible";
                     document.getElementById("tnxText").innerText = `${data.data.txhash}`
                     document.getElementById("tnxClose").onclick = () => {
                     text.style.visibility="hidden";

                     let chart = document.getElementById("chart-panel");
                     if (chart.classList.contains("panel-wrap-visible")) {
                     chart.classList.toggle("panel-wrap-visible");
                       }
                       complete_order();
                     }

                     clearInterval(myInterval)
                  }
               })
         }

         async function complete_order() {
            let data = await fetch('https://metaverse.sakhaglobal.com:447/complete_order',
               { method: "POST" })
               .then((response) => {
                  return response.json()
               })
               .then(() => {
                  for (const key in sessionStorage) {
                    if((key !== "customerDetails")){
                     sessionStorage.removeItem(key)
                    }
                  }
               })
         }
      </script>

      <script>
         sessionStorage.setItem('paymentMethod', JSON.stringify(null));
         
         function PaymentMethodWallet() {
         sessionStorage.setItem('paymentMethod', JSON.stringify('wallet'));
         
         let paymentMethod = JSON.parse(sessionStorage.getItem('paymentMethod'));
         document.getElementById('PaymentMethodWallet').style.backgroundColor = '#dbdad5'
         // document.getElementById('PaymentMethodCredit').style.backgroundColor = "transparent";
         // document.getElementById('PaymentMethodCredit').style.opacity = "1";
         
         }
         
         // function PaymentMethodCredit() {
         // sessionStorage.setItem('paymentMethod', JSON.stringify('credit'));
         
         // let paymentMethod = JSON.parse(sessionStorage.getItem('paymentMethod'));
         // document.getElementById('PaymentMethodCredit').style.backgroundColor = '#dbdad5'
         // document.getElementById('PaymentMethodWallet').style.backgroundColor = "transparent";
         //     document.getElementById('PaymentMethodWallet').style.opacity = "1";
         // }

         // PROCESS 1
         function ResetMethod(){
         document.getElementById('PaymentMethodWallet').style.backgroundColor = "transparent";
         // document.getElementById('PaymentMethodCredit').style.backgroundColor = "transparent";
         }
      </script>
      
      <!-- Start Continue as Guest -->
      <script>         

      </script>
      <!-- End Continue as Guest -->
      <script>
         async function create_session() {
           let customer_uuid = null;
           let customer_details = null;
           let isLoggedIn = null;
           const isGuestLogin = JSON.parse(sessionStorage.getItem('isGuestLogin'));
           
           if (!isGuestLogin) {
             const customerDetails = JSON.parse(sessionStorage.getItem('customerDetails'));
             customer_details = customerDetails;
             isLoggedIn = true;
             customer_uuid = sessionStorage.getItem('GuestLoginUuid');
             
           } else {
             customer_uuid = sessionStorage.getItem('GuestLoginUuid');
             isLoggedIn = false
           }
           const body = {
             customer_uuid: customer_uuid,
             customer_details: customer_details,
             isLoggedIn: isLoggedIn
           };
           
       
           const loader = document.getElementById("create_session_loader");
           const loaderDiv = document.getElementById("create_session_loaderDiv");
           loader.style.display = "block";
           let div = document.createElement("div");

           let div1 = document.createElement("div");
           div1.innerHTML = "Please wait while we create private session for you...";

            let div2 = document.createElement("div");
            div2.innerHTML = "this might take a few seconds";
            div.append(div1, div2);

            loaderDiv.appendChild(div);
         //  loaderDiv.innerHTML = "Please wait while we create private session for you";
       
           try {
             const response = await fetch('https://metaverse.sakhaglobal.com/create_session', {
               method: 'POST',
               body: JSON.stringify(body),
               headers: {
                 'Content-Type': 'application/json'
               }
             });
       
             if (!response.ok) {
               throw new Error(`Error: ${response.statusText}`);
             }
       
             const data = await response.json();
             if(data){
               loader.style.display = "none";
               loaderDiv.style.display = "none";
             }
             console.log(data,'customerID');
             if(data.isLoggedIn === 'true'){
               //console.log('yes
               await start_exe(data.port);
               alert(`Copy this URL: https://metaverse.sakhaglobal.com:${data.port}/register.html?sessionId=${data.transferCurrentUser.sessionId} to share with your friends`);
               
               const loader = document.getElementById("create_session_loader");
               const loaderDiv = document.getElementById("create_session_loaderDiv");
               loader.style.display = "block";
               let div = document.createElement("div");

               let div1 = document.createElement("div");
               div1.innerHTML = "Please wait while we create private session for you...";

               let div2 = document.createElement("div");
               div2.innerHTML = "this might take a few seconds";
               div.append(div1, div2);

               loaderDiv.appendChild(div);
               setTimeout(function () {
               loader.style.display = "none"; // hide the loader
               loaderDiv.style.display = "none"; // Hide the loader
               const playerUrl = `https://metaverse.sakhaglobal.com:${data.port}/player.html?hoveringMouse=true&sessionId=${data.transferCurrentUser.sessionId}&transferCurrentUser=${JSON.stringify(data.transferCurrentUser)}&customerDetails=${JSON.stringify(data.customerDetails)}&isLoggedIn=${data.isLoggedIn}`;
               window.location.href = playerUrl;
               }, 5000);

               

               
             }
             else{
               await start_exe(data.port);
               alert(`Copy this URL: https://metaverse.sakhaglobal.com:${data.port}/register.html?sessionId=${data.transferCurrentUser.sessionId} to share with your friends`);
               //await start_exe(data.port);
               const loader = document.getElementById("create_session_loader");
               const loaderDiv = document.getElementById("create_session_loaderDiv");
               loader.style.display = "block";
               let div = document.createElement("div");

               let div1 = document.createElement("div");
               div1.innerHTML = "Please wait while we create private session for you...";

               let div2 = document.createElement("div");
               div2.innerHTML = "this might take a few seconds";
               div.append(div1, div2);

               loaderDiv.appendChild(div);
               setTimeout(function () {
               loader.style.display = "none"; // hide the loader
               loaderDiv.style.display = "none"; // Hide the loader
               const playerUrl = `https://metaverse.sakhaglobal.com:${data.port}/player.html?hoveringMouse=true&sessionId=${data.transferCurrentUser.sessionId}&transferCurrentUser=${JSON.stringify(data.transferCurrentUser)}&isLoggedIn=${data.isLoggedIn}`;
               window.location.href = playerUrl;
               }, 5000);
              

               
             }
             
           } catch (error) {
             console.error('Error:', error);
             // Handle errors and display user-friendly messages as needed.
           }
         }
       </script>

       <script>
         const UserRole = sessionStorage.getItem("UserRole"); // Removed JSON.stringify
console.log(UserRole,"user");
var executive = document.getElementById("showQuery");
var employee = document.getElementById("msgBtn");
if (UserRole == 1) { 
   console.log("1");// Use strict equality (===) for comparison
    //var executive = document.getElementById("popup");
    if (executive) { // Check if the element exists before modifying it
        executive.style.display = "none";
        employee.style.display = "block";
    }
} else if (UserRole == 2) { // Use strict equality (===) for comparison
    console.log("exec");
    //var employee = document.getElementById("popupQuery");
    if (employee) { // Check if the element exists before modifying it
        employee.style.display = "none";
        executive.style.display = "block";
    }
}

       </script>
      
   </body>
</html>